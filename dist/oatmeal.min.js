/*!
 * oatmeal - copyright (c) Nathan McWilliams 2013
 * https://github.com/endium/oatmeal
 * MIT license
*/
"use strict";var bake,bakeCookies,cookie,cookieJar,decode,encode,fillJar,get,getSource,munch,munchMunch,oatmeal,serialize,set,setSource,source,__hasProp={}.hasOwnProperty;cookieJar=null,source=null,getSource=function(){return source||document.cookie||null},setSource=function(e){return source=e},bakeCookies=function(e){var o,n,u,r,c,l;for(u={},l=e.split(/;\s/g),r=0,c=l.length;c>r;r++)o=l[r],n=o.split("="),u[n[0]]=decode(n[1]);return u},encode=function(e){return encodeURIComponent(JSON.stringify(e))},decode=function(e){return JSON.parse(decodeURIComponent(e))},get=function(e){return(null!=cookieJar?cookieJar:cookieJar=bakeCookies(getSource()))[e]},set=function(e,o,n){return null==n&&(n={}),document.cookie=bake(e,o,n)},bake=function(e,o,n){var u,r,c,l,t,i;return null==n&&(n={}),u=n.expires||new Date,l=0,null!=n.seconds&&(l+=1e3*n.seconds),null!=n.minutes&&(l+=6e4*n.minutes),null!=n.hours&&(l+=36e5*n.hours),null!=n.days&&(l+=864e5*n.days),null!=n.months&&(l+=2592e6*n.months),null!=n.years&&(l+=31536e6*n.years),u.setTime(u.getTime()+l),t=serialize("path",n.path||"/"),r=serialize("domain",n.domain),i=serialize("secure",n.secure),c=serialize("expires",null!=n.expires||0!==l?u.toUTCString():null),console.log("\nbaking: "+e+"="+encode(o)+c+t+r+i),""+e+"="+encode(o)+c+t+r+i},serialize=function(e,o){return null==o?"":o===!0?"; "+e:"; "+e+"="+o},fillJar=function(){return null!==getSource()?cookieJar=bakeCookies(getSource()):void 0},munch=function(e){return set(e,"(del)",{days:-1})},munchMunch=function(){var e;filJar();for(e in cookieJar)__hasProp.call(cookieJar,e)&&munch(e);return cookieJar=null},cookie=function(e,o,n){return null!=o?set(e,o,n):get(e)},oatmeal={bake:bake,munch:munch,munchMunch:munchMunch,cookie:cookie,source:setSource,fillJar:fillJar},"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports=oatmeal:window.oatmeal=oatmeal;